<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width" />
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="styles.css" />

</head>

<body>
  <canvas id="drawingArea" height="500" width="500px"> </canvas>


  </canvas>

  <script>


  </script>
</body>
<br>
<input type="text" id="thema">
<button onclick="button1()">subscribe</button>
<br>
<input type="text" id="nachricht">
<button onclick="button2()">senden</button>
<div id="ausgabe">

</div>
<script src="draw.js"></script>
<script src="mqtt.js"></script>
<script src="paho-mqtt.js"></script>

<script>
  var area = document.getElementById("drawingArea");
  var drawpad = new Drawpad(area);
  const output=document.getElementById("ausgabe");
  connect();



  var topic;

  function button1() {
    topic = document.getElementById("thema").value;
    subscribe(topic);
  }
  function button2() {
    nachrichttext= document.getElementById("nachricht").value;
    sendMessage(nachrichttext,topic)
  }

  function erhalteNachricht(message){
    output.innerHTML+="<br>"+message;
    const messageparts=message.split(" ");
    if(messageparts[0]=="D"){
    drawpad.mouseDown();
    }
    if(messageparts[0]=="U"){
      drawpad.mouseUp();
    }
    if(messageparts[0]=="M"){
      const x=messageparts[1];
      const y=messageparts[2];
      drawpad.move(x, y);
    }
  }


</script>

</html>
